{% extends 'dashboard.html' %}
{% load static %}

{% block title %}Give Notification{% endblock %}
{% block content%}

<div class="container-fluid">
  <h1>Send Notification</h1>

      {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">{{ message }}</div>
        {% endfor %}
      {% endif %}

      <form action="{% url 'send_notification' %}" method="post" id="AdminNotification">

        {% csrf_token%}

        <div class="mb-3">
          <label>Notification Type:</label>
          <select name="notifytype" id="type" class="form-control">
            <option value="">--Select Type--</option>
            <option value="Casual">Casual Notification</option>
            <option value="Meeting">Meeting Link</option>
          </select>
          <div id="NotifyTypeError" class="error"></div>
        </div>

        <div class="mb-3">
          <label>Notification Title:</label>
          <input type="text" name="notifytitle" class="form-control">
          <div id="NotifyTitleError" class="error"></div>
        </div>

        <div class="mb-3">
          <label>Description:</label>
          <textarea name="notifydesc" class="form-control" rows="5"></textarea>
          <div id="NotifyDescError" class="error"></div>
        </div>

        <div class="mb-3" id="link_field">
          <label>Meeting Link:</label>
          <input type="text" name="meetinglink" class="form-control">
          <div id="MeetingLinkError" class="error"></div>
        </div>

        <button type="submit" class="btn btn-success">Send</button>

      </form>
</div>
{% endblock %}

{% block extra_js %}

<script src="{% static 'js/myjs_script.js' %}"></script>

<script>
// hide/show link field based on type
document.addEventListener('DOMContentLoaded', function() {
    const typeSelect = document.getElementById('type');
    const linkField = document.getElementById('link_field');

    function toggleLinkField() {
        if (typeSelect.value === 'Casual') {
            linkField.style.display = 'none';
        } else if (typeSelect.value === 'Meeting') {
            linkField.style.display = 'block';
        }
    }

    typeSelect.addEventListener('change', toggleLinkField);
    toggleLinkField(); // run on page load
});
</script>

{% endblock %}